<template>
  <base-page>
    <base-box title="baseButton方式（推荐）">
      当前角色：{{ userInfo.role }}
      <div class="mt-[25px]">
        切换角色：
        <el-radio-group v-model="userInfo.role" @change="changeRole">
          <el-radio-button label="admin" />
          <el-radio-button label="test" />
        </el-radio-group>
      </div>
      <div class="mt-[25px]">
        <base-button auth="admin_permission_button:modify">
          admin has button
        </base-button>
        <base-button>all has button</base-button>
      </div>
    </base-box>
    <base-box title="自定义指令方式（不可动态切换）">
      当前角色：{{ userInfo.role }}
      <div class="mt-[25px]">
        切换角色：
        <el-radio-group v-model="userInfo.role" @change="changeRole">
          <el-radio-button label="admin" />
          <el-radio-button label="test" />
        </el-radio-group>
      </div>
      <div class="mt-[25px]">
        <base-button v-permission="'admin_permission_button:modify'">
          admin has button
        </base-button>
      </div>
    </base-box>
  </base-page>
</template>

<script lang="ts" setup>
import { useUserStoreWithOut } from '/@/store/modules/user'
const userStore = useUserStoreWithOut()
const router = useRouter()
const { userInfo } = toRefs(userStore)

const changeRole = (val: any) => {
  userStore.changeRole(val, router)
}
</script>

<style lang="scss" scoped></style>
