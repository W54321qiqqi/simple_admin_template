import{_ as B}from"./index-bc1f9373.js";import{_ as W}from"./index-5eabd057.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_lang-1ca7c90e.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-ebc7e2ee.js";import{aL as I,l as g,f as t,p as N,az as O,a as R,i as $,o as F,z as M,t as l,s as m,x as h,q as S}from"./index-608388f6.js";import{g as V,c as j}from"./index-b699dcd6.js";import{F as C}from"./componentEnum-841f9c25.js";import"./useTagViewSetting-df63cf71.js";import"./el-popper-78880e63.js";import"./el-form-item-b3006bda.js";import"./el-checkbox-4d03f4e6.js";import"./index.vue_vue_type_script_setup_true_lang-cc636e8b.js";import"./el-tag-0933cffd.js";import"./localeData-8653ce0b.js";import"./index-2d155c6e.js";import"./index-31b9afc0.js";import"./icon-selector-7b53ce5f.js";import"./dropdown-f6705d68.js";const D=Symbol("watermark-dom"),w=(u=g(document.body))=>{const k=V(function(){const e=t(u);if(!e)return;const{clientHeight:o,clientWidth:c}=e;Object.assign(n.value,{width:c,height:o}),p()},200),s=D.toString(),a=I(),n=g({}),f=()=>{const e=t(a);a.value=void 0;const o=t(u);o&&(e&&o.removeChild(e),console.log("ğŸš€ ~ file: useWatermark.ts:36 ~ clear ~ domId:",e))};function v(){const e=document.createElement("canvas"),o=t(n).step||1,c=t(n).value||"ç¼ºå°‘æ°´å°å€¼",r=t(n).color||"rgba(0,0,0,0.25)",d=t(n).size||"15px",_=200*o,b=140*o;Object.assign(e,{width:_,height:b});const i=e.getContext("2d");return i&&(i.rotate(-20*Math.PI/120),i.font=d+" Vedana",i.fillStyle=r,i.textAlign="left",i.textBaseline="middle",i.fillText(c,_/20,b)),e.toDataURL("image/png")}function p(){const e=t(a),o=t(n).value||"ç¼ºå°‘æ°´å°å€¼";e&&(t(n).width&&(e.style.width=`${t(n).width}px`),t(n).height&&(e.style.height=`${t(n).height}px`),o&&(e.style.background=`url(${v()}) left top repeat`))}const y=()=>{if(t(a))return p(),s;const e=document.createElement("div");a.value=e,e.id=s,e.style.pointerEvents="none",e.style.top="0px",e.style.left="0px",e.style.position="absolute",e.style.zIndex="100000";const o=t(u);if(!o)return s;const{clientHeight:c,clientWidth:r}=o;return Object.assign(n.value,{width:r,height:c}),p(),o.appendChild(e),s};function x(e){n.value=e,y(),j(u,k),O()&&N(()=>{f();debugger})}return{setWatermark:x,clear:f}},ae=R({__name:"index",setup(u){const k=g([{fieldName:"value",fieldDesc:"æ°´å°åå­—",fieldType:C.INPUT},{fieldName:"color",fieldDesc:"æ°´å°é¢œè‰²",fieldType:C.COLOR}]),s=g(),a=$({value:"ä¸€ä¸ªå°ç˜ªä¸‰"}),{setWatermark:n,clear:f}=w(),{setWatermark:v,clear:p}=w(s),y=()=>{n({value:a.value,color:a.color})},x=()=>{v({value:a.value,color:a.color})};return(e,o)=>{const c=z,r=T,d=W,_=B;return F(),M(_,{class:"overflow-hidden"},{default:l(()=>[m(d,{title:"é¡µé¢æ°´å°"},{default:l(()=>[m(c,{columns:t(k),model:t(a),inline:"",colProps:{span:8}},null,8,["columns","model"]),m(r,{type:"primary",onClick:y},{default:l(()=>[h("åˆ›å»ºæ°´å°")]),_:1}),m(r,{type:"primary",onClick:t(f)},{default:l(()=>[h("æ¸…é™¤æ°´å°")]),_:1},8,["onClick"])]),_:1}),m(d,{title:"å®¹å™¨æ°´å°"},{default:l(()=>[S("div",{style:{height:"400px"},ref_key:"boxRef",ref:s},[m(r,{type:"primary",onClick:x},{default:l(()=>[h(" åˆ›å»ºæ°´å° ")]),_:1}),m(r,{type:"primary",onClick:t(p)},{default:l(()=>[h("æ¸…é™¤æ°´å°")]),_:1},8,["onClick"])],512)]),_:1})]),_:1})}}});export{ae as default};
