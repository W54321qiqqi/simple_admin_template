import{b as D,J as H,a as P,c as m,u as q,l as E,f as n,a0 as J,o as d,z as B,t as f,e as y,n as b,a3 as I,g as w,r as R,x as X,ab as j,_ as G,cc as Q,w as Y,i as Z,L as x,m as ee,ca as F,aF as oe,s as V,q as c,F as te,v as ne,aR as se,aO as A,c9 as le,c8 as ae,c7 as re,X as z,A as ie,bc as pe}from"./index-3ca3440a.js";import{u as L,b as u,E as ce,a as ue}from"./el-popper-dc3a5bde.js";import{d as de}from"./index-995dff64.js";import{d as $}from"./dropdown-6cd025a8.js";const fe=D({trigger:L.trigger,placement:$.placement,disabled:L.disabled,visible:u.visible,transition:u.transition,popperOptions:$.popperOptions,tabindex:$.tabindex,content:u.content,popperStyle:u.popperStyle,popperClass:u.popperClass,enterable:{...u.enterable,default:!0},effect:{...u.effect,default:"light"},teleported:u.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),ve={"update:visible":i=>H(i),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},me="onUpdate:visible",be=P({name:"ElPopover"}),he=P({...be,props:fe,emits:ve,setup(i,{expose:r,emit:l}){const a=i,_=m(()=>a[me]),e=q("popover"),h=E(),N=m(()=>{var o;return(o=n(h))==null?void 0:o.popperRef}),k=m(()=>[{width:J(a.width)},a.popperStyle]),v=m(()=>[e.b(),a.popperClass,{[e.m("plain")]:!!a.content}]),C=m(()=>a.transition===`${e.namespace.value}-fade-in-linear`),g=()=>{var o;(o=h.value)==null||o.hide()},S=()=>{l("before-enter")},M=()=>{l("before-leave")},s=()=>{l("after-enter")},t=()=>{l("update:visible",!1),l("after-leave")};return r({popperRef:N,hide:g}),(o,T)=>(d(),B(n(ce),j({ref_key:"tooltipRef",ref:h},o.$attrs,{trigger:o.trigger,placement:o.placement,disabled:o.disabled,visible:o.visible,transition:o.transition,"popper-options":o.popperOptions,tabindex:o.tabindex,content:o.content,offset:o.offset,"show-after":o.showAfter,"hide-after":o.hideAfter,"auto-close":o.autoClose,"show-arrow":o.showArrow,"aria-label":o.title,effect:o.effect,enterable:o.enterable,"popper-class":n(v),"popper-style":n(k),teleported:o.teleported,persistent:o.persistent,"gpu-acceleration":n(C),"onUpdate:visible":n(_),onBeforeShow:S,onBeforeHide:M,onShow:s,onHide:t}),{content:f(()=>[o.title?(d(),y("div",{key:0,class:b(n(e).e("title")),role:"title"},I(o.title),3)):w("v-if",!0),R(o.$slots,"default",{},()=>[X(I(o.content),1)])]),default:f(()=>[o.$slots.reference?R(o.$slots,"reference",{key:0}):w("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Ve=G(he,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const U=(i,r)=>{const l=r.arg||r.value,a=l==null?void 0:l.popperRef;a&&(a.triggerRef=i)};var ye={mounted(i,r){U(i,r)},updated(i,r){U(i,r)}};const ge="popover",Ie=Q(ye,ge),we=Y(Ve,{directive:Ie});const _e={class:"icon-selector-box"},Ne={class:"selector-header"},ke={class:"selector-title"},Ce={class:"selector-tab"},Se={class:"selector-body"},Me={key:0},$e=["title","onClick"],Ee={class:"icon-prepend"},Be={key:0,class:"name"},Pe=P({name:"IconSelector",__name:"icon-selector",props:{size:{default:"default"},disabled:{type:Boolean,default:!1},title:{default:""},type:{default:"ele"},placement:{default:"bottom"},modelValue:{default:""},showIconName:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(i,{emit:r}){const l=i,a=E(),_=E(),e=Z({iconType:l.type,selectorWidth:0,popoverVisible:!1,inputFocus:!1,iconSelectorMouseover:!1,fontIconNames:[],inputValue:"",prependIcon:l.modelValue,defaultModelValue:l.modelValue||"el-icon-Minus",iconKey:0}),h=()=>{e.inputFocus=e.popoverVisible=!0},N=()=>{e.inputFocus=!1,e.popoverVisible=e.iconSelectorMouseover},k=()=>{e.iconKey++,e.prependIcon=e.defaultModelValue,e.inputValue="",r("update:modelValue",e.defaultModelValue),r("change",e.defaultModelValue)},v=s=>{e.iconType=s,e.fontIconNames=[],s=="ele"?F().then(t=>{e.fontIconNames=t}):s=="awe"?le().then(t=>{e.fontIconNames=t.map(o=>`fa ${o}`)}):s=="ali"?ae().then(t=>{e.fontIconNames=t.map(o=>`iconfont ${o}`)}):s=="local"&&re().then(t=>{e.fontIconNames=t})},C=s=>{e.iconSelectorMouseover=e.popoverVisible=!1,e.iconKey++,e.prependIcon=s,e.inputValue="",r("update:modelValue",s),r("change",s),z(()=>{a.value.blur()})},g=m(()=>{if(!e.inputValue)return e.fontIconNames;let s=e.inputValue.trim().toLowerCase();return e.fontIconNames.filter(t=>{if(t.toLowerCase().indexOf(s)!==-1)return t})}),S=()=>{z(()=>{e.selectorWidth=a.value.$el.offsetWidth<260?260:a.value.$el.offsetWidth})},M=()=>{e.popoverVisible=!!(e.inputFocus||e.iconSelectorMouseover)};return x(()=>l.modelValue,()=>{e.iconKey++,l.modelValue!=e.prependIcon&&(e.defaultModelValue=l.modelValue),l.modelValue==""&&(e.defaultModelValue="el-icon-Minus"),e.prependIcon=l.modelValue}),ee(()=>{S(),de(document,"click",M),F().then(s=>{e.fontIconNames=s})}),(s,t)=>{const o=ie,T=ue,K=oe,W=we;return d(),B(W,{placement:s.placement,trigger:"focus","hide-after":0,width:n(e).selectorWidth,visible:n(e).popoverVisible},{reference:f(()=>[V(K,{modelValue:n(e).inputValue,"onUpdate:modelValue":t[6]||(t[6]=p=>n(e).inputValue=p),size:s.size,disabled:s.disabled,placeholder:"搜索图标",ref_key:"selectorInput",ref:a,onFocus:h,onBlur:N,class:b("size-"+s.size)},{prepend:f(()=>[c("div",Ee,[(d(),B(o,{key:"icon"+n(e).iconKey,name:n(e).prependIcon?n(e).prependIcon:n(e).defaultModelValue},null,8,["name"])),s.showIconName?(d(),y("div",Be,I(n(e).prependIcon?n(e).prependIcon:n(e).defaultModelValue),1)):w("",!0)])]),append:f(()=>[V(o,{onClick:k,name:"el-icon-RefreshRight"})]),_:1},8,["modelValue","size","disabled","class"])]),default:f(()=>[c("div",{onMouseover:t[4]||(t[4]=A(p=>n(e).iconSelectorMouseover=!0,["stop"])),onMouseout:t[5]||(t[5]=A(p=>n(e).iconSelectorMouseover=!1,["stop"])),class:"icon-selector"},[V(se,{name:"el-zoom-in-center"},{default:f(()=>[c("div",_e,[c("div",Ne,[c("div",ke,I(s.title?s.title:"请选择图标"),1),c("div",Ce,[c("span",{title:"Element Puls 图标",onClick:t[0]||(t[0]=p=>v("ele")),class:b({active:n(e).iconType=="ele"})}," ele ",2),c("span",{title:"Font Awesome 图标",onClick:t[1]||(t[1]=p=>v("awe")),class:b({active:n(e).iconType=="awe"})}," awe ",2),c("span",{title:"阿里 Iconfont 图标",onClick:t[2]||(t[2]=p=>v("ali")),class:b({active:n(e).iconType=="ali"})}," ali ",2),c("span",{title:"本地图标:/src/assets/icons中的.svg",onClick:t[3]||(t[3]=p=>v("local")),class:b({active:n(e).iconType=="local"})}," local ",2)])]),c("div",Se,[V(T,{ref_key:"selectorScrollbarRef",ref:_},{default:f(()=>[n(g).length?(d(),y("div",Me,[(d(!0),y(te,null,ne(n(g),(p,O)=>(d(),y("div",{class:"icon-selector-item",title:p,onClick:Te=>C(p),key:O},[V(o,{name:p},null,8,["name"])],8,$e))),128))])):w("",!0)]),_:1},512)])])]),_:1})],32)]),_:1},8,["placement","width","visible"])}}});const Le=pe(Pe,[["__scopeId","data-v-cae2586f"]]);export{Le as B};
